#:kivy 2.2.1

# Color definitions
#:set primary_color (0.2, 0.6, 0.3, 1)  # Dark green
#:set secondary_color (0.3, 0.7, 0.4, 1)  # Light green
#:set text_color (1, 1, 1, 1)  # White
#:set success_color (0.2, 0.8, 0.2, 1)  # Green
#:set error_color (0.8, 0.2, 0.2, 1)  # Red

<EmailSignupScreen>:
    email_input: email_input
    password_input: password_input
    confirm_password_input: confirm_password_input
    
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1  # White background
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: 'vertical'
        padding: dp(20)
        spacing: dp(10)

        # Top section with logo and title
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: 0.35
            spacing: dp(10)
            
            AsyncImage:
                source: 'logo.png'
                size_hint: None, None
                size: dp(100), dp(100)
                pos_hint: {'center_x': 0.5}
                allow_stretch: True
                keep_ratio: True
                on_error: self.source = ''  # Clear source on error

            Label:
                text: "SAFINITY"
                font_size: '24sp'
                bold: True
                color: 0, 0, 0, 1
                size_hint_y: None
                height: dp(30)
                pos_hint: {'center_x': 0.5}

            Label:
                text: "Create your account"
                font_size: '18sp'
                color: (0.223, 0.510, 0.478, 1)
                size_hint_y: None
                height: dp(30)

        Widget:
            size_hint_y: 0.2

        # Input fields
        BoxLayout:
            orientation: 'vertical'
            size_hint: None, None
            size: dp(300), dp(200)
            pos_hint: {'center_x': 0.5}
            spacing: dp(20)

            TextInput:
                id: email_input
                hint_text: "Email"
                multiline: False
                size_hint_y: None
                height: dp(40)
                background_normal: ''
                background_active: ''
                background_color: (0, 0, 0, 0)
                hint_text_color: (0, 0, 0, 0.5)
                foreground_color: (0, 0, 0, 1)
                cursor_color: (0, 0, 0, 1)
                padding: [10, 10, 10, 0]
                font_size: '16sp'
                write_tab: False
                canvas.after:
                    Color:
                        rgba: (0.223, 0.510, 0.478, 1)
                    Line:
                        points: self.x, self.y, self.x + self.width, self.y
                        width: 1

            TextInput:
                id: password_input
                hint_text: "Password"
                multiline: False
                password: True
                size_hint_y: None
                height: dp(40)
                background_normal: ''
                background_active: ''
                background_color: (0, 0, 0, 0)
                hint_text_color: (0, 0, 0, 0.5)
                foreground_color: (0, 0, 0, 1)
                cursor_color: (0, 0, 0, 1)
                padding: [10, 10, 10, 0]
                font_size: '16sp'
                write_tab: False
                canvas.after:
                    Color:
                        rgba: (0.223, 0.510, 0.478, 1)
                    Line:
                        points: self.x, self.y, self.x + self.width, self.y
                        width: 1

            TextInput:
                id: confirm_password_input
                hint_text: "Confirm Password"
                multiline: False
                password: True
                size_hint_y: None
                height: dp(40)
                background_normal: ''
                background_active: ''
                background_color: (0, 0, 0, 0)
                hint_text_color: (0, 0, 0, 0.5)
                foreground_color: (0, 0, 0, 1)
                cursor_color: (0, 0, 0, 1)
                padding: [10, 10, 10, 0]
                font_size: '16sp'
                write_tab: False
                canvas.after:
                    Color:
                        rgba: (0.223, 0.510, 0.478, 1)
                    Line:
                        points: self.x, self.y, self.x + self.width, self.y
                        width: 1

        Widget:
            size_hint_y: 0.05

        # Buttons section
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: None
            height: dp(140)  # Increased height for two buttons
            spacing: dp(20)
            padding: [0, 0]

            Button:
                text: "Sign Up"
                size_hint: None, None
                size: dp(200), dp(50)
                pos_hint: {'center_x': 0.5}
                background_color: 0, 0, 0, 0
                color: 1, 1, 1, 1
                font_size: '16sp'
                canvas.before:
                    Color:
                        rgba: (0.223, 0.510, 0.478, 1)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [25]
                on_release: root.validate_and_signup()

            Button:
                text: "Back to Login"
                size_hint: None, None
                size: dp(200), dp(50)
                pos_hint: {'center_x': 0.5}
                background_color: 0, 0, 0, 0
                color: (0.223, 0.510, 0.478, 1)
                font_size: '16sp'
                canvas.before:
                    Color:
                        rgba: (0,0,0,0)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [25]
                on_release: root.back_to_login()

        Widget:
            size_hint_y: 0.15 